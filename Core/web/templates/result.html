<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Production Article for {{ name }}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .pattern-pieces {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .piece {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }
        .color-swatch {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin: 0 5px;
            border: 1px solid #ccc;
            vertical-align: middle;
        }
        .tip-list {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè≠ Production Plan: {{ name }}</h1>
        <p>{{ description }}</p>
        <p><strong>Author:</strong> {{ author }} | <strong>Version:</strong> {{ version }}</p>
    </div>

    <div class="metrics">
        <div class="metric-card">
            <h3>üõ† Complexity</h3>
            <p>{{ complexity_description }} (Level {{ complexity }}/5)</p>
        </div>
        <div class="metric-card">
            <h3>‚è± Time Estimate</h3>
            <p>{{ time }}</p>
        </div>
        <div class="metric-card">
            <h3>üéØ Skill Level</h3>
            <p>{{ skill }}</p>
        </div>
        <div class="metric-card">
            <h3>üìê Geometry</h3>
            <p>{{ geometry|title }}</p>
        </div>
    </div>

    <h2>üìä Design Specifications</h2>
    <div class="metrics">
        <div class="metric-card">
            <h3>Diameter</h3>
            <p>{{ diameter }} mm ({{ "%.1f"|format(diameter/10) }} cm)</p>
        </div>
        <div class="metric-card">
            <h3>Length</h3>
            <p>{{ length }} mm ({{ "%.1f"|format(length/10) }} cm)</p>
        </div>
        <div class="metric-card">
            <h3>Gores/Panels</h3>
            <p>{{ gores }}</p>
        </div>
        <div class="metric-card">
            <h3>Fabric Area</h3>
            <p>{{ "%.3f"|format(pattern_details.total_area_m2) if pattern_details.total_area_m2 is defined else "N/A" }} m¬≤</p>
        </div>
    </div>

    {% if color_info.selected_colors %}
    <h2>üé® Color Information</h2>
    <div class="metric-card">
        <p><strong>Selected Colors:</strong>
            {% for color in color_info.selected_colors %}
            <span class="color-swatch" style="background-color: {{ color|color_hex }}"></span>
            {{ color|color_name }}{% if not loop.last %}, {% endif %}
            {% endfor %}
        </p>
        <p><strong>Pattern:</strong> {{ color_info.pattern_notes }}</p>
        <p><strong>Visibility:</strong> {{ color_info.visibility_tips }}</p>
        {% if color_info.pattern_suggestion %}
        <p><strong>Suggestion:</strong> {{ color_info.pattern_suggestion }}</p>
        {% endif %}
    </div>
    {% endif %}

    <h2>üì¶ Materials Required</h2>
    <ul>
        {% for mat in materials %}
        <li><strong>{{ mat.item }}:</strong> {{ mat.qty }}</li>
        {% endfor %}
        <li><strong>Total Fabric:</strong> {{ pattern_details.estimated_fabric_required }}</li>
    </ul>

    <h2>‚úÇÔ∏è Pattern Pieces ({{ pattern_details.num_pieces }})</h2>
    <div class="pattern-pieces">
        {% for piece in pattern.pieces %}
        <div class="piece">
            <h4>{{ piece.name }}: {{ piece.description }}</h4>
            <p><strong>Shape:</strong> {{ piece.shape|title }}</p>
            <p><strong>Dimensions:</strong>
                {% if piece.shape == 'rectangle' %}
                    {{ piece.width_mm }}mm √ó {{ piece.height_mm }}mm
                    ({{ piece.width_cm }}cm √ó {{ piece.height_cm }}cm)
                {% elif piece.shape == 'trapezoid' %}
                    Base: {{ piece.base_width_mm }}mm, Tip: {{ piece.tip_width_mm }}mm, Height: {{ piece.height_mm }}mm
                {% else %}
                    {{ piece.width_mm }}mm √ó {{ piece.height_mm }}mm
                {% endif %}
            </p>
            {% if piece.seam_allowance %}
            <p><strong>Seam Allowance:</strong> {{ piece.seam_allowance }}mm</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <h2>üõ†Ô∏è Construction Instructions</h2>
    <div>
        {{ instructions|safe }}
    </div>

    <h2>üí° Expert Tips</h2>
    <div class="tip-list">
        <ul>
            {% for tip in construction_tips %}
            <li>{{ tip }}</li>
            {% endfor %}
        </ul>
    </div>

    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ccc;">
        <p><em>Generated by Kite Laundry Builder ‚Ä¢ Happy flying! ü™Å</em></p>
        <a href="/generate">‚Üê Create Another Design</a> |
        <a href="/">Back to Home</a>
    </div>
</body>
</html>
